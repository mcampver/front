// @Autor:Gianni Martinez
import {
  Component,
  EventEmitter,
  Input,
  Output,
  ViewChild,
} from '@angular/core';
import { Router } from '@angular/router';

import { MatDialog } from '@angular/material/dialog';

import { DataGridComponent } from 'src/app/shared/components/data-grid/component/data-grid.component';
import { DialogBasicComponent } from 'src/app/core/components/dialog-basic/dialog-basic.component';
import { SnackBarService } from 'src/app/core/components/snack-bar/snack-bar.service';
import { CrudDialogTypeEnum } from '@shared/enums/dialog.enum';
import { OpsComponent } from '../add/ops.component';
import { ICreateFormOps } from '@shared/interfaces/create-form-ops.interface';
import { OpsService } from '../ops.service';
import { IOps } from '../interface/ops.interface';

@Component({
  selector: 'ai-list-equipment',
  templateUrl: './list.component.html',
  styleUrls: ['./list.component.scss'],
})
export class ListComponent {
  // @Output() emitter = new EventEmitter<Array<unknown>>();
  // @Input() hideOptions = false;
  @ViewChild('tabla')
  tabla!: DataGridComponent<IOps>;

  data: IOps[] = [];

  constructor(
    public service: OpsService,
    private router: Router,
    private snackBarService: SnackBarService,
    public dialog: MatDialog
  ) {}

  // @Output()
  // emitSelectedValues(event: Array<unknown>) {
  //   this.emitter.emit(event);
  // }
  get dataSelectId(): string[] {
    return this.tabla?.selection.selected ?? [];
  }

  get hasDataSelected(): boolean {
    return this.tabla?.selection.hasValue() ?? false;
  }

  add(): void {
    console.log('openDialog button');
    this.dialog
      .open(OpsComponent, {
        disableClose: true,
        width: '500px',
      })
      .afterClosed()
      .subscribe((result: boolean) => {
        console.log(result);
      });
  }

  edit(id: string): void {
    console.log(id);
    this.dialog
      .open(OpsComponent, {
        disableClose: true,
        width: '500px',
        data: { createType: CrudDialogTypeEnum.EDIT },
      })
      .afterClosed()
      .subscribe((result: boolean) => {
        console.log(result);
      });
  }

  deleteMany() {
    this.dialog
      .open(DialogBasicComponent, {
        data: {
          value: 1,
        },
      })
      .afterClosed()
      .subscribe((result: boolean) => {
        if (result) {
          // this.snackBarService?.openSnackBar('Test Messange', 'Cerrar');
        }
      });
  }
}
